{%extends 'base.html'%}
{%load static%}
{%block content%}
<main class="w-full h-full relative top-24 mt-4">
    <div class="xl:w-292.5 lg:w-242.5 md:w-187.5 mx-auto px-4">
        <div>
            <div class="flex">
                <div class="w-2/3 mr-5 p-4">
                    <div>
                        <video controls autoplay>
                            <source src="{{my_video.video.url}}" type="video/mp4">
                        </video>
                    </div>
                    <h2 class="font-semibold py-4 font-sans capitalize text-xl">{{my_video.video_detail.title}}</h2>
                    <div class="flex justify-between pb-3 border-b border-gray-400">
                        <div class="font-medium text-gray-700 text-lg">
                            <span class="leading-8">{{view_count}} views</span>
                            <span><strong>Â·</strong></span>
                            <span>{{my_video.uploaded|timesince}} ago</span>
                        </div>
                        <div class="flex space-x-4 font-medium text-gray-700 text-lg">
                            <form action="{% url 'like_video' my_video.id %}" method="POST" class="like-form">
                                {%csrf_token%}
                                <button type="submit" class="like-btn focus:outline-none" value="{{my_video.id}}">
                                    {% if user not in my_video.like.all %}
                                    <svg xmlns="http://www.w3.org/2000/svg" id="like-icon" class="mr-1 inline-block"
                                        viewBox="0 0 20 20" width="24" height="24" fill="currentColor">
                                        <path
                                            d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z" />
                                    </svg>
                                    {%else%}
                                    <svg xmlns="http://www.w3.org/2000/svg" id="like-icon"
                                        class="mr-1 inline-block text-blue-700" viewBox="0 0 20 20" width="24"
                                        height="24" fill="currentColor">
                                        <path
                                            d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z" />
                                    </svg>
                                    {%endif%}
                                </button>
                                <span id="like-count">{{my_video.num_like}}</span>
                            </form>
                            <form action="{%url 'dislike_video' my_video.id%}" method="POST" class="dislike-form">
                                {%csrf_token%}
                                <button type="submit" class="dislike-btn focus:outline-none" value="{{my_video.id}}">
                                    {% if user not in my_video.dislike.all %}
                                    <svg xmlns="http://www.w3.org/2000/svg" id="dislike-icon" class="mr-1 inline-block"
                                        viewBox="0 0 20 20" width="24" height="24" fill="currentColor">
                                        <path
                                            d="M18 9.5a1.5 1.5 0 11-3 0v-6a1.5 1.5 0 013 0v6zM14 9.667v-5.43a2 2 0 00-1.105-1.79l-.05-.025A4 4 0 0011.055 2H5.64a2 2 0 00-1.962 1.608l-1.2 6A2 2 0 004.44 12H8v4a2 2 0 002 2 1 1 0 001-1v-.667a4 4 0 01.8-2.4l1.4-1.866a4 4 0 00.8-2.4z" />
                                    </svg>
                                    {%else%}
                                    <svg xmlns="http://www.w3.org/2000/svg" id="dislike-icon"
                                        class="mr-1 inline-block text-blue-700" viewBox="0 0 20 20" width="24"
                                        height="24" fill="currentColor">
                                        <path
                                            d="M18 9.5a1.5 1.5 0 11-3 0v-6a1.5 1.5 0 013 0v6zM14 9.667v-5.43a2 2 0 00-1.105-1.79l-.05-.025A4 4 0 0011.055 2H5.64a2 2 0 00-1.962 1.608l-1.2 6A2 2 0 004.44 12H8v4a2 2 0 002 2 1 1 0 001-1v-.667a4 4 0 01.8-2.4l1.4-1.866a4 4 0 00.8-2.4z" />
                                    </svg>
                                    {%endif%}
                                </button>
                                <span id="dislike-count">{{my_video.num_dislike}}</span>
                            </form>
                            <form action="{% url 'add_to_playlist' my_video.id %}" method="POST" class="playlist-form">
                                {%csrf_token%}
                                {% if my_video in playlist.video.all %}
                                <button type="submit"
                                    class="playlist-btn focus:outline-none bg-gray-300 p-2 rounded text-sm flex items-center space-x-1 text-red-500"
                                    name="video_id" value="{{my_video.id}}">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                        fill="currentColor">
                                        <path fill-rule="evenodd"
                                            d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"
                                            clip-rule="evenodd" />
                                    </svg>
                                    <span>Favorite</span>
                                </button>
                                {%else%}
                                <button type="submit"
                                    class="playlist-btn focus:outline-none bg-gray-300 p-2 rounded text-sm flex items-center space-x-1 text-black"
                                    name="video_id" value="{{my_video.id}}">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                        fill="currentColor">
                                        <path fill-rule="evenodd"
                                            d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"
                                            clip-rule="evenodd" />
                                    </svg>
                                    <span>Favorite</span>
                                </button>
                                {%endif%}
                            </form>
                        </div>
                    </div>

                    <div class="flex justify-between mt-4">
                        <div class="flex space-x-4">
                            <div class="rounded-full overflow-hidden">
                                <a href="{% url 'channel' my_video.channel.slug%}"><img
                                        src="{{my_video.channel.avatar.url}}" alt=""
                                        class="w-12 h-12 object-cover" /></a>
                            </div>
                            <div class="flex-col justify-center items-center">
                                <div class="text-lg font-medium hover:underline"">
                                    <a href=" {%url 'channel' my_video.channel.slug%}">{{my_video.channel.name}}</a>
                                </div>
                                <div id="sub-count">{{my_video.channel.num_subcribers}} Subcribers</div>
                            </div>
                        </div>
                        {%if user == my_video.channel.user%}
                        <div><button type="submit" disabled name="channel_id" value="{{my_video.channel.id}}"
                                class="hidden sub-btn px-8 py-3 bg-red-700 text-white font-medium text-l border border-gray-400 focus:outline-none"><span
                                    id="sub-text">Subcribe</span></button>
                        </div>
                        {%else%}
                        <form action="{%url 'subcriber' my_video.id%}" method="POST" class="subcriber-form">
                            {%csrf_token%}
                            {%if user in my_video.channel.subcribers.all%}
                            <button type="submit" id="sub-btn" name="channel_id" value="{{my_video.channel.id}}"
                                class="sub-btn px-4 py-3 bg-gray-500 text-white font-medium text-l border border-gray-500 focus:outline-none flex items-center capitalize round">
                                <svg xmlns="http://www.w3.org/2000/svg" class="sub-icon h-6 w-6" fill="none"
                                    viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M5 13l4 4L19 7" />
                                </svg><span id="sub-text">Subcribed</span></button>
                            {%else%}
                            <button type="submit" id="sub-btn" name="channel_id" value="{{my_video.channel.id}}"
                                class="sub-btn px-4 py-3 bg-red-700 text-white font-medium text-l border border-gray-500 focus:outline-none flex items-center capitalize round">
                                <svg xmlns="http://www.w3.org/2000/svg" class="hidden sub-icon h-6 w-6" fill="none"
                                    viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M5 13l4 4L19 7" />
                                </svg><span id="sub-text">Subcribe</span></button>
                            {%endif%}
                        </form>
                        {%endif%}
                    </div>

                    <div class="py-3 pl-16 mt-2 pb-3 border-b border-gray-400">
                        <p class="font-medium">{{my_video.video_detail.description}}</p>
                    </div>
                    <div class="mt-4">
                        <div class="font-semibold capitalize text-2xl pb-2">59 comments</div>
                        <textarea name="comment" rows="4" id="comment"
                            class="w-11/12 outline-none tracking-wider p-6 border-b border-gray-700"
                            placeholder="Add a comment .."></textarea>
                    </div>
                    <div class="comment">
                        <div class="flex space-x-3 my-2">
                            <img src="#" class="rounded-full h-10 w-10" alt="profile pic">
                            <div class="py-2">
                                <h2 class="capitalize font-semibold text-xl">channel name or username <span
                                        class="text-lg">3 days ago</span></h2>
                                <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Animi qui amet maxime
                                    repudiandae eligendi consectetur
                                    soluta repellat debitis ut perferendis?</p>
                                <a href="#" class="text-lg capitalize py-2 text-blue-700">reply</a>
                            </div>
                        </div>

                        <div class="flex space-x-3 my-2">
                            <img src="#" class="rounded-full h-10 w-10" alt="profile pic">
                            <div class="pb-3">
                                <h2 class="capitalize font-semibold text-xl">channel name or username <span
                                        class="text-lg">3 days ago</span></h2>
                                <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Animi qui amet maxime
                                    repudiandae eligendi consectetur
                                    soluta repellat debitis ut perferendis?</p>
                                <a href="#" class="text-lg capitalize py-2 text-blue-700">reply</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="w-1/3 p-4 h-screen min-h-full">
                    <h2 class="font-semibold py-2 capitalize text-xl border-b border-gray-400 mb-4">Up next</h2>
                    <div class="flex space-x-2 p-2">
                        <div class="w-1/2 h-40 py-2">
                            <img src="#" class="" alt="thumbnail">
                        </div>
                        <div>
                            <h1 class="font-semibold">Lorem ipsum dolor sit, amet <br> consectetur consectetur.</h1>
                            <div class="mt-2 text-sm text-gray-700">
                                <h2>channel name</h2>
                                <h3>1.9k views<strong>&nbspÂ·&nbsp</strong>3 day ago</h3>
                            </div>
                        </div>
                    </div>
                    <div class="flex space-x-2 p-2">
                        <div class="w-1/2 h-40 py-2">
                            <img src="#" class="" alt="thumbnail">
                        </div>
                        <div>
                            <h1 class="font-semibold">Lorem ipsum dolor sit, amet <br> consectetur consectetur.</h1>
                            <div class="mt-2 text-sm text-gray-700">
                                <h2>channel name</h2>
                                <h3>1.9k views<strong>&nbspÂ·&nbsp</strong>3 day ago</h3>
                            </div>
                        </div>
                    </div>
                    <div class="flex space-x-2 p-2">
                        <div class="w-1/2 h-40 py-2">
                            <img src="#" class="" alt="thumbnail">
                        </div>
                        <div>
                            <h1 class="font-semibold">Lorem ipsum dolor sit, amet <br> consectetur consectetur.</h1>
                            <div class="mt-2 text-sm text-gray-700">
                                <h2>channel name</h2>
                                <h3>1.9k views<strong>&nbspÂ·&nbsp</strong>3 day ago</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
{%endblock content%}
{% block extra_body %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="{%static 'js/ajax.js/'%}"></script>
{% endblock %}